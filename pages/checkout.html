
<!--Code taken from Michael Duigan lectures Week 13 notes-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shop</title>
</head>
   <body>
      <div class="container"> 
        <h1>Checkout</h1>
        <h2 id="cart_items"></h2>
        <h2 id="final_price"></h2>
        <form>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <label for="address">Address</label>
            <textarea id="address" name="address" required></textarea>

            <label for="payment">Payment Method</label>
            <select id="payment" name="payment">
                <option value="credit-card">Credit Card</option>
                <option value="Visa Debit">Visa Debit</option>
                <option value="Bank-Transfer">Bank-Transfer</option>
            </select>

            <button type="submit">Place Order</button>
            <a href="shop.ejs">Back to shop</a>

        </form> 
   </body>
</html>
<script>
    //Allow the total cost to be stored in a local storage on the computer so that when the user goes to checkout that the total amount will appear on the checkout screen showing all items that are purchased 
    let cost_allItems = 0;
    for(i = 0; i < localStorage.length; i++)
    {   //The product that the user chose will be stored on a local storage on the computer
        let product = localStorage.key(i);
        let content = JSON.parse(localStorage.getItem(product));
        // total cost = the quantity chosen plus the price of the product
        let total_cost = content.quan * content.p;
        cost_allItems += total_cost;
        if(content.quan > 0)
        {
            document.getElementById("cart_items").innerHTML += product + " x " + content.quan + " = " + total_cost + "<br>";

        }
        document.getElementById("final_price").innerHTML = cost_allItems;
    }



</script>